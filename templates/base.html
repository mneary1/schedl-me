<!doctype html>
<html itemscope itemtype="http://schema.org/Article">
<head>
  {% block title %}<title>schedl.me</title>{% endblock %}
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
  <script type="text/javascript">
    (function() {
      var po = document.createElement('script');
      po.type = 'text/javascript';
      po.async = true;
      po.src = 'https://plus.google.com/js/client:plusone.js?onload=start';
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(po, s);
    })();
  </script>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}" />
</head>
<body>
  {% block header %}
  <header>
    <h1>schedl.me</h1>
  </header>
  {% endblock %}

  {% block body %}
  {% endblock %}

  {% block footer %}
  <footer>
    <p>Made with sleep deprivation and love by <a href="http://twitter.com/@jneal7492">Jeremy Neal</a> and <a href="http://twitter.com/@mneary5">Michael Neary</a>.</p>
  </footer>
  {% endblock %}
  <script type="text/javascript">
  function signInCallback(authResult) {
    if (authResult['code']) {

      // Hide the sign-in button if the user is logged in.
      $('#signinButton').attr('style', 'display: none');

      // Send code to the server.
      $.ajax({
          type: 'POST',
          url: 'plus.php?storeToken',
          contentType: 'application/octet-stream; charset=utf-8',
          success: function(result) {
            // Handle/verify result if necessary.

            console.log(result);
            if (result['profile'] && result['people']) {
              $('#results').html("Hello " + result['profile']['displayName'] + '. You have successfully logged in.');
              } else {
                $('#results').html('Failed to log in.');
              }
            },
            processData: false,
            data: authResult['code']
        });
    } else if (authResult['error']) {
      // Handle error condition
    }
  }
  </script>
</body>
</html>
